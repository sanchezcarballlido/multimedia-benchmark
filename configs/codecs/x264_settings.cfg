# GStreamer x264enc Configuration File
# ------------------------------------
# Based on the documentation from: https://gstreamer.freedesktop.org/documentation/x264/index.html?gi-language=c
#
# - Each uncommented line will be passed as an option to the x264enc element.
# - Comment out any options you are not using.

# --- Presets & Tuning ---

# Preset for speed/quality tradeoff (ultrafast, superfast, veryfast, faster, fast, medium, slow, slower, veryslow, placebo).
# This is already set in the main YAML but can be overridden here.
# speed-preset=medium

# Psychovisual tuning (film, animation, grain, stillimage, psnr, ssim, fastdecode, zerolatency).
# psy-tune=film

# Preset for tuning options (film, animation, grain, stillimage, psnr, ssim, fastdecode, zerolatency).
tune=zerolatency

# --- Rate Control ---

# Bitrate in kbit/sec. Used in ABR mode.
# Default: 2048
# bitrate=2048

# Constant quantizer or quality to apply. This is the recommended way to set CRF.
# Allowed values: 0 to 51
# quantizer=21

# Encoding pass/type (cbr, quant, qual, pass1, pass2, pass3).
# 'quant' is for constant quantizer/quality (CRF).
# pass=quant

# Minimum quantizer.
# Default: 10
# qp-min=10

# Maximum quantizer.
# Default: 51
# qp-max=51

# Maximum quantizer difference between frames.
# Default: 4
# qp-step=4

# --- GOP (Group of Pictures) Structure ---

# Maximal distance between two key-frames (0 for automatic).
# key-int-max=250

# Use intra-refresh instead of keyframes.
# intra-refresh=false

# --- B-Frames ---

# Number of B-frames between I and P.
# Default: 0
# bframes=3

# Automatically decide how many B-frames to use.
# b-adapt=true

# Keep some B-frames as references.
# b-pyramid=false

# Weighted prediction for B-frames.
# weightb=false

# --- Threading ---

# Number of threads used by the codec (0 for automatic).
# threads=0

# Low latency but lower efficiency threading.
# sliced-threads=false

# --- Video Buffering ---

# Size of the VBV buffer in milliseconds.
# Default: 0
# vbv-buf-capacity=600

# Number of frames for frametype lookahead.
# Default: -1
# rc-lookahead=40

# --- NALU & Bitstream Options ---

# Generate byte stream format of NALU.
# byte-stream=false

# Use AU (Access Unit) delimiter.
# aud=true

# Enable CABAC entropy coding.
# cabac=true

# Insert VUI parameters in stream.
# insert-vui=true

# --- Advanced Options ---

# Macroblock-tree rate-control.
# mb-tree=true

# Enable trellis searched quantization.
# trellis=true

# Adaptive spatial transform size.
# dct8x8=false

# Partitions to consider (none, fast, normal, slow, all).
# analyse=all

# Integer pixel motion estimation method (dia, hex, umh, esa, tesa).
# me=hex

# Sub-pixel motion estimation and mode decision.
# Default: 7
# subme=7

# String of x264 options in the format "key1=value1:key2=value2".
# See x264 --fullhelp for a complete list.
# option-string=aq-mode=1:stats-write=0